/*! ArcGIS API for JavaScript 4.8 | Copyright (c) 2018 Esri. All rights reserved. | http://www.esri.com/legal/privacy | https://developers.arcgis.com/terms/faq */
require(["SessionManager","esri/request","dojo/query","esri/core/urlUtils","dojo/_base/event","dojo/NodeList-manipulate"],function(t,e,n,o,i){function a(e){n("body").append('<iframe src="'+e+'" style="display:none;"></iframe>')}function r(e,o){if(t.loggedIn()){var n=t.organization&&t.organization.subscriptionInfo?t.organization.subscriptionInfo.type:"Public";(i=e,r=o,esri.request({url:SiteConfig.download_server+"/dms/rest/download/secured/"+i,content:{token:t.token(),folder:r}}).then(function(e){if(200===e.code)return e.url},function(e){})).then(a),ga("send","event","SDK Downloads","File Download",e),ga("send","event","SDK Downloads","Account Type",n)}else t.redirect("/sign-in",{redirect_uri:window.location.href.replace(window.location.search,"")+"?filename="+e+"&folder="+o});var i,r}var l;n(".download-link").on("click",function(e){i.stop(e);var o=n(this);r(o.attr("data-filename")[0],o.attr("data-folder")[0])}),(l=o.urlToObject(window.location.href).query)&&l.filename&&l.folder&&(r(l.filename,l.folder),history.replaceState({},"",location.pathname))});
/*! ArcGIS API for JavaScript 4.8 | Copyright (c) 2018 Esri. All rights reserved. | http://www.esri.com/legal/privacy | https://developers.arcgis.com/terms/faq */
define(["dojo/_base/declare","dojo/_base/lang","dojox/lang/functional/object","dojo/Evented","dojo/topic","Quoin/History","Quoin/Base"],function(e,t,o,r,n,u,i){var a=/\((.*?)\)/g,s=/(\(\?)?:\w+/g,c=/\*\w+/g,h=/[\-{}\[\]+?.,\\\^$|#\s]/g;return new(e("Quoin.Router",[r,i],{route:function(r,n,i){return r instanceof RegExp||(r=this._routeToRegExp(r)),u.route(r,t.hitch(this,function(e){var t=this._extractParameters(r,e),o={name:n,args:t};i&&i.apply(this,t),this.emit("route:"+n,o),this.emit("route",o),u.emit("route",o)})),this},navigate:function(e,t){return u.navigate(e,t),this},_bindRoutes:function(){if(this.routes)for(var e,t=o.keys(this.routes);null!==(e=t.pop());)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(h,"\\$&").replace(a,"(?:$1)?").replace(s,function(e,t){return t?e:"([^/]+)"}).replace(c,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}}))});